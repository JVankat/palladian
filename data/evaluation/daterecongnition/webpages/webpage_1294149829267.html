<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Penggabungan</title><link rel="stylesheet" href="styles_html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.73.2"><link rel="start" href="index.html" title="TortoiseSVN"><link rel="up" href="tsvn-dug.html" title="Bab 4. Bimbingan Penggunaan Harian"><link rel="prev" href="tsvn-dug-branchtag.html" title="Pencabangan / Pembuatan Tag"><link rel="next" href="tsvn-dug-locking.html" title="Penguncian"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Penggabungan</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="tsvn-dug-branchtag.html">Kembali</a>�</td><th width="60%" align="center">Bab 4. Bimbingan Penggunaan Harian</th><td width="20%" align="right">�<a accesskey="n" href="tsvn-dug-locking.html">Lanjut</a></td></tr></table><hr></div><div class="sect1" lang="id"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tsvn-dug-merge"></a>Penggabungan</h2></div></div></div><a class="indexterm" name="id542154"></a><p>Dimana cabang digunakan untuk memelihara baris terpisah dari pengembangan pada beberapa tahap Anda akan menginginkan untuk menggabung perubahan yang dibuat pada satu cabang kembali ke dalam trunk, atau sebaliknya.</p><p>It is important to understand how branching and merging works in Subversion before you start using it, as it can become quite complex. It is highly recommended that you read the chapter <a class="ulink" href="http://svnbook.red-bean.com/en/1.5/svn.branchmerge.html" target="_top"><em class="citetitle">Branching and Merging</em></a> in the Subversion book, which gives a full description and many examples of how it is used.</p><p>The next point to note is that merging <span class="emphasis"><em>always</em></span> takes place within a working copy. If you want to merge changes <span class="emphasis"><em>into</em></span> a branch, you have to have a working copy for that branch checked out, and invoke the merge wizard from that working copy using <span class="guimenu">TortoiseSVN</span> &#8594; <span class="guimenuitem">Merge...</span>.</p><p>Secara umum adalah ide yang baik untuk melakukan penggabungan ke dalam copy pekerjaan yang tidak diubah. Jika Anda membuat perubahan lain dalam WC Anda, komit itu dulu. Jika penggabungan tidak seperti yang Anda harapkan, Anda mungkin ingin memulihkan perubahan, dan perintah <span class="guilabel">Pulihkan</span> akan mengabaikan <span class="emphasis"><em>semua</em></span> perubahan termasuk setiap yang Anda buat sebelum penggabungan.</p><p>There are three common use cases for merging which are handled in slightly different ways, as described below. The first page of the merge wizard asks you to select the method you need.</p><div class="variablelist"><dl><dt><span class="term">Merge a range of revisions</span></dt><dd><p>Metode ini mengetengahkan kasus ketika Anda sudah membuat satu atau lebih revisi ke cabang (atau ke trunk) dan Anda ingin mengirimkan perubahan itu ke cabang yang berbeda.</p><p>What you are asking Subversion to do is this: &#8220;<span class="quote">Calculate the changes necessary to get [FROM] revision 1 of branch A [TO] revision 7 of branch A, and apply those changes to my working copy (of trunk or branch B).</span>&#8221;</p></dd><dt><span class="term">Reintegrate a branch</span></dt><dd><p>This method covers the case when you have made a feature branch as discussed in the Subversion book. All trunk changes have been ported to the feature branch, week by week, and now the feature is complete you want to merge it back into the trunk. Because you have kept the feature branch synchronized with the trunk, the latest versions of branch and trunk will be absolutely identical except for your branch changes.</p><p>This is a special case of the tree merge described below, and it requires only the URL to merge from (normally) your development branch. It uses the merge-tracking features of Subversion to calculate the correct revision ranges to use, and perform additional checks which ensure that the branch has been fully updated with trunk changes. This ensures that you don't accidentally undo work that others have committed to trunk since you last synchronized changes.</p><p>After the merge, all branch development has been completely merged back into the main development line. The branch is now redundant and can be deleted.</p><p>Once you have performed a reintegrate merge you should not continue to use it for development. The reason for this is that if you try to resynchronize your existing branch from trunk later on, merge tracking will see your reintegration as a trunk change that has not yet been merged into the branch, and will try to merge the branch-to-trunk merge back into the branch! The solution to this is simply to create a new branch from trunk to continue the next phase of your development.</p></dd><dt><span class="term">Merge two different trees</span></dt><dd><p>This is a more general case of the reintegrate method. What you are asking Subversion to do is: &#8220;<span class="quote">Calculate the changes necessary to get [FROM] the head revision of the trunk [TO] the head revision of the branch, and apply those changes to my working copy (of the trunk).</span>&#8221; The net result is that trunk now looks exactly like the branch.</p><p>If your server/repository does not support merge-tracking then this is the only way to merge a branch back to trunk. Another use case occurs when you are using vendor branches and you need to merge the changes following a new vendor drop into your trunk code. For more information read the chapter on <a class="ulink" href="http://svnbook.red-bean.com/en/1.5/svn.advanced.vendorbr.html" target="_top"><em class="citetitle">vendor branches</em></a> in the Subversion Book.</p></dd></dl></div><div class="sect2" lang="id"><div class="titlepage"><div><div><h3 class="title"><a name="tsvn-dug-merge-range"></a>Menggabungkan Suatu Jangkauan Revisi</h3></div></div></div><a class="indexterm" name="id542439"></a><div class="figure"><a name="tsvn-dug-merge-wizard-range"></a><p class="title"><b>Gambar 4.36. The Merge Wizard - Select Revision Range</b></p><div class="figure-contents"><div><img src="images/MergeWizardRange.png" alt="The Merge Wizard - Select Revision Range"></div></div></div><p><br class="figure-break"> In the <span class="guilabel">From:</span> field enter the full folder URL of the branch or tag containing the changes you want to port into your working copy. You may also click <span class="guibutton">...</span> to browse the repository and find the desired branch. If you have merged from this branch before, then just use the drop down list which shows a history of previously used URLs.</p><p>In the <span class="guilabel">Revision range to merge</span> field enter the list of revisions you want to merge. This can be a single revision, a list of specific revisions separated by commas, or a range of revisions separated by a dash, or any combination of these.</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Penting</h3><p>There is an important difference in the way a revision range is specified with TortoiseSVN compared to the command line client. The easiest way to visualise it is to think of a fence with posts and fence panels.</p><p>With the command line client you specify the changes to merge using two &#8220;<span class="quote">fence post</span>&#8221; revisions which specify the <span class="emphasis"><em>before</em></span> and <span class="emphasis"><em>after</em></span> points.</p><p>With TortoiseSVN you specify the changeset to merge using &#8220;<span class="quote">fence panels</span>&#8221;. The reason for this becomes clear when you use the log dialog to specify revisions to merge, where each revision appears as a changeset.</p><p>If you are merging revisions in chunks, the method shown in the subversion book will have you merge 100-200 this time and 200-300 next time. With TortoiseSVN you would merge 100-200 this time and 201-300 next time.</p><p>This difference has generated a lot of heat on the mailing lists. We acknowledge that there is a difference from the command line client, but we believe that for the majority of GUI users it is easier to understand the method we have implemented.</p></div><p>The easiest way to select the range of revisions you need is to click on <span class="guibutton">Show Log</span>, as this will list recent changes with their log comments. If you want to merge the changes from a single revision, just select that revision. If you want to merge changes from several revisions, then select that range (using the usual <span class="keycap"><strong>Shift</strong></span>-modifier). Click on <span class="guibutton">OK</span> and the list of revision numbers to merge will be filled in for you.</p><p>If you want to merge changes back <span class="emphasis"><em>out</em></span> of your working copy, to revert a change which has already been committed, select the revisions to revert and make sure the <span class="guilabel">Reverse merge</span> box is checked.</p><p>If you have already merged some changes from this branch, hopefully you will have made a note of the last revision merged in the log message when you committed the change. In that case, you can use <span class="guibutton">Show Log</span> for the Working Copy to trace that log message. Remembering that we are thinking of revisions as changesets, you should Use the revision after the end point of the last merge as the start point for this merge. For example, if you have merged revisions 37 to 39 last time, then the start point for this merge should be revision 40.</p><p>If you are using the merge tracking features of Subversion, you do not need to remember which revisions have already been merged - Subversion will record that for you. If you leave the revision range blank, all revisions which have not yet been merged will be included. Read <a class="xref" href="tsvn-dug-merge.html#tsvn-dug-merge-tracking" title="Merge Tracking">&#8220;Merge Tracking&#8221;</a> to find out more.</p><p>Jika orang lain boleh mengkomit perubahan maka hati-hati terhadap penggunaan revisi HEAD. Ia tidak boleh merujuk ke revisi yang Anda pikir benar jika orang lain mengkomit setetlah pemutahiran Anda yang terkahir.</p><p>Click <span class="guibutton">Next</span> and go to <a class="xref" href="tsvn-dug-merge.html#tsvn-dug-merge-options" title="Merge Options">&#8220;Merge Options&#8221;</a></p></div><div class="sect2" lang="id"><div class="titlepage"><div><div><h3 class="title"><a name="tsvn-dug-merge-reintegrate"></a>Reintegrate a branch</h3></div></div></div><a class="indexterm" name="id541711"></a><div class="figure"><a name="tsvn-dug-merge-wizard-reintegrate"></a><p class="title"><b>Gambar 4.37. The Merge Wizard - Reintegrate Merge</b></p><div class="figure-contents"><div><img src="images/MergeWizardReintegrate.png" alt="The Merge Wizard - Reintegrate Merge"></div></div></div><p><br class="figure-break"> To merge a feature branch back into the trunk you must start the merge wizard from within a working copy of the trunk.</p><p>In the <span class="guilabel">From URL:</span> field enter the full folder URL of the branch that you want to merge back. You may also click <span class="guibutton">...</span> to browse the repository.</p><p>There are some conditions which apply to a reintegrate merge. Firstly, the server must support merge tracking. The working copy must be of depth infinite (no sparse checkouts), and it must not have any local modifications, switched items or items that have been updated to revisions other than HEAD. All changes to trunk made during branch development must have been merged across to the branch (or marked as having been merged). The range of revisions to merge will be calculated automatically.</p></div><div class="sect2" lang="id"><div class="titlepage"><div><div><h3 class="title"><a name="tsvn-dug-merge-tree"></a>Menggabung Dua Pohon yang Berbeda</h3></div></div></div><a class="indexterm" name="id541776"></a><div class="figure"><a name="tsvn-dug-merge-wizard-trees"></a><p class="title"><b>Gambar 4.38. The Merge Wizard - Tree Merge</b></p><div class="figure-contents"><div><img src="images/MergeWizardTree.png" alt="The Merge Wizard - Tree Merge"></div></div></div><p><br class="figure-break"> If you are using this method to merge a feature branch back to trunk, you need to start the merge wizard from within a working copy of trunk.</p><p>In the <span class="guilabel">From:</span> field enter the full folder URL of the <span class="emphasis"><em>trunk</em></span>. This may sound wrong, but remember that the trunk is the start point to which you want to add the branch changes. You may also click <span class="guibutton">...</span> to browse the repository.</p><p>In the <span class="guilabel">To:</span> field enter the full folder URL of the feature branch.</p><p>Dalam kedua field <span class="guilabel">Dari Revisi</span> dan field <span class="guilabel">Ke Revisi</span>, masukkan angka revisi terakhir dimana dua susunan disinkronisasi. Jika Anda yakin tidak-ada yang lain melakukan komit Anda bisa menggunakan revisi HEAD dalam kedua kasus. Jika ada kesempatan dimana orang lain sudah melakukan komit sejak sinkronisasi, gunakan angka revisi tertenu untuk menghindari kehilangan komit terbaru.</p><p>You can also use <span class="guibutton">Show Log</span> to select the revision.</p></div><div class="sect2" lang="id"><div class="titlepage"><div><div><h3 class="title"><a name="tsvn-dug-merge-options"></a>Merge Options</h3></div></div></div><p>This page of the wizard lets you specify advanced options, before starting the merge process. Most of the time you can just use the default settings.</p><p>You can specify the depth to use for the merge, i.e. how far down into your working copy the merge should go. The depth terms used are described in <a class="xref" href="tsvn-dug-checkout.html#tsvn-dug-checkout-depth" title="Checkout Depth">&#8220;Checkout Depth&#8221;</a>. The default depth is <span class="guilabel">Working copy</span>, which uses the existing depth setting, and is almost always what you want.</p><p>Most of the time you want merge to take account of the file's history, so that changes relative to a common ancestor are merged. Sometimes you may need to merge files which are perhaps related, but not in your repository. For example you may have imported versions 1 and 2 of a third party library into two separate directories. Although they are logically related, Subversion has no knowledge of this because it only sees the tarballs you imported. If you attempt to merge the difference between these two trees you would see a complete removal followed by a complete add. To make Subversion use only path-based differences rather than history-based differences, check the <span class="guilabel">Ignore ancestry</span> box. Read more about this topic in the Subversion book, <a class="ulink" href="http://svnbook.red-bean.com/en/1.5/svn.branchmerge.advanced.html#svn.branchmerge.advanced.ancestry" target="_top"><em class="citetitle">Noticing or Ignoring Ancestry</em></a></p><p>You can specify the way that line ending and whitespace changes are handled. These options are described in <a class="xref" href="tsvn-dug-diff.html#tsvn-dug-diff-eol-whitespace" title="Line-end and Whitespace Options">&#8220;Line-end and Whitespace Options&#8221;</a>. The default behaviour is to treat all whitespace and line-end differences as real changes to be merged.</p><p>If you are using merge tracking and you want to mark a revision as having been merged, without actually doing the merge here, check the <span class="guilabel">Only record the merge</span> checkbox. There are two possible reasons you might want to do this. It may be that the merge is too complicated for the merge algorithms, so you code the changes by hand, then mark the change as merged so that the merge tracking algorithm is aware of it. Or you might want to prevent a particular revision from being merged. Marking it as already merged will prevent the merge occurring with merge-tracking-aware clients.</p><p>Now everything is set up, all you have to do is click on the <span class="guibutton">Merge</span> button. If you want to preview the results <span class="guibutton">Test Merge</span> performs the merge operation, but does <span class="emphasis"><em>not</em></span> modify the working copy at all. It shows you a list of the files that will be changed by a real merge, and notes those areas where conflicts will occur.</p><p>The merge progress dialog shows each stage of the merge, with the revision ranges involved. This may indicate one more revision than you were expecting. For example if you asked to merge revision 123 the progress dialog will report &#8220;<span class="quote">Merging revisions 122 through 123</span>&#8221;. To understand this you need to remember that Merge is closely related to Diff. The merge process works by generating a list of differences between two points in the repository, and applying those differences to your working copy. The progress dialog is simply showing the start and end points for the diff.</p></div><div class="sect2" lang="id"><div class="titlepage"><div><div><h3 class="title"><a name="tsvn-dug-merge-review"></a>Reviewing the Merge Results</h3></div></div></div><p>The merge is now complete. It's a good idea to have a look at the merge and see if it's as expected. Merging is usually quite complicated. Conflicts often arise if the branch has drifted far from the trunk.</p><p>For Subversion clients and servers prior to 1.5, no merge information is stored and merged revisions have to be tracked manually. When you have tested the changes and come to commit this revision, your commit log message should <span class="emphasis"><em>always</em></span> include the revision numbers which have been ported in the merge. If you want to apply another merge at a later time you will need to know what you have already merged, as you do not want to port a change more than once. For more information about this, refer to <a class="ulink" href="http://svnbook.red-bean.com/en/1.4/svn.branchmerge.copychanges.html#svn.branchmerge.copychanges.bestprac" target="_top"><em class="citetitle">Best Practices for Merging</em></a> in the Subversion book.</p><p>If your server and all clients are running Subversion 1.5 or higher, the merge tracking facility will record the revisions merged and avoid a revision being merged more than once. This makes your life much simpler as you can simply merge the entire revision range each time and know that only new revisions will actually be merged.</p><p>Manajemen cabang penting. Jika Anda ingin membiarkan cabang ini mutahir dengan trunk, Anda harus memastikan untuk sering menggabung agar cabang dan trunk tidak berselisih terlalu jauh. Tentu saja, Anda masih harus menghindari pengulangan penggabungan perubahan seperti dijelaskan di atas.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Tip</h3><p>If you have just merged a feature branch back into the trunk, the trunk now contains all the new feature code, and the branch is obsolete. You can now delete it from the repository if required.</p></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Penting</h3><p>Subversion can't merge a file with a folder and vice versa - only folders to folders and files to files. If you click on a file and open up the merge dialog, then you have to give a path to a file in that dialog. If you select a folder and bring up the dialog, then you must specify a folder URL for the merge.</p></div></div><div class="sect2" lang="id"><div class="titlepage"><div><div><h3 class="title"><a name="tsvn-dug-merge-tracking"></a>Merge Tracking</h3></div></div></div><a class="indexterm" name="id541077"></a><p>Subversion 1.5 introduced facilities for merge tracking. When you merge changes from one tree into another, the revision numbers merged are stored and this information can be used for several different purposes. </p><div class="itemizedlist"><ul type="disc"><li><p>You can avoid the danger of merging the same revision twice (repeated merge problem). Once a revision is marked as having been merged, future merges which include that revision in the range will skip over it.</p></li><li><p>When you merge a branch back into trunk, the log dialog can show you the branch commits as part of the trunk log, giving better traceability of changes.</p></li><li><p>When you show the log dialog from within the merge dialog, revisions already merged are shown in grey.</p></li><li><p>When showing blame information for a file, you can choose to show the original author of merged revisions, rather than the person who did the merge.</p></li><li><p>You can mark revisions as <span class="emphasis"><em>do not merge</em></span> by including them in the list of merged revisions without actually doing the merge.</p></li></ul></div><p>Merge tracking information is stored in the <code class="literal">svn:mergeinfo</code> property by the client when it performs a merge. When the merge is committed the server stores that information in a database, and when you request merge, log or blame information, the server can respond appropriately. For the system to work properly you must ensure that the server, the repository and all clients are upgraded. Earlier clients will not store the <code class="literal">svn:mergeinfo</code> property and earlier servers will not provide the information requested by new clients.</p><p>Find out more about merge tracking from Subversion's <a class="ulink" href="http://subversion.tigris.org/merge-tracking/index.html" target="_top"><em class="citetitle">Merge tracking documentation</em></a>.</p></div><div class="sect2" lang="id"><div class="titlepage"><div><div><h3 class="title"><a name="tsvn-dug-merge-conflict-callback"></a>Handling Conflicts during Merge</h3></div></div></div><a class="indexterm" name="id540686"></a><p>Merging does not always go smoothly. Sometimes there is a conflict, and if you are merging multiple ranges, you generally want to resolve the conflict before merging of the next range starts. TortoiseSVN helps you through this process by showing the <span class="emphasis"><em>merge conflict callback</em></span> dialog. </p><div class="figure"><a name="tsvn-dug-merge-callback-dia"></a><p class="title"><b>Gambar 4.39. The Merge Conflict Callback Dialog</b></p><div class="figure-contents"><div><img src="images/MergeConflictCallback.png" alt="The Merge Conflict Callback Dialog"></div></div></div><p><br class="figure-break"></p><p>When a conflict occurs during the merge, you have three ways to handle it. </p><div class="orderedlist"><ol type="1"><li><p>You may decide that your local changes are much more important, so you want to discard the version from the repository and keep your local version. Or you might discard your local changes in favour of the repository version. Either way, no attempt is made to merge the changes - you choose one or the other.</p></li><li><p>Normally you will want to look at the conflicts and resolve them. In that case, choose the <span class="guibutton">Edit Conflict</span> which will start up your merge tool. When you are satisfied with the result, click <span class="guibutton">Resolved</span>.</p></li><li><p>The last option is to postpone resolution and continue with merging. You can choose to do that for the current conflicted file, or for all files in the rest of the merge. However, if there are further changes in that file, it will not be possible to complete the merge.</p></li></ol></div><p>If you do not want to use this interactive callback, there is a checkbox in the merge progress dialog <span class="guilabel">Merge non-interactive</span>. If this is set for a merge and the merge would result in a conflict, the file is marked as in conflict and the merge goes on. You will have to resolve the conflicts after the whole merge is finished. If it is not set, then before a file is marked as conflicted you get the chance to resolve the conflict <span class="emphasis"><em>during</em></span> the merge. This has the advantage that if a file gets multiple merges (multiple revisions apply a change to that file), subsequent merges might succeed depending on which lines are affected. But of course you can't walk away to get a coffee while the merge is running ;)</p></div><div class="sect2" lang="id"><div class="titlepage"><div><div><h3 class="title"><a name="tsvn-dug-merge-all"></a>Merge a Completed Branch</h3></div></div></div><a class="indexterm" name="id542132"></a><p>If you want to merge all changes from a feature branch back to trunk, then you can use the <span class="guimenu">TortoiseSVN</span> &#8594; <span class="guimenuitem">Merge reintegrate...</span> from the extended context menu (hold down the <span class="keycap"><strong>Shift</strong></span> key while you right click on the file). </p><div class="figure"><a name="tsvn-dug-mergeall-dia-1"></a><p class="title"><b>Gambar 4.40. The Merge reintegrate Dialog</b></p><div class="figure-contents"><div><img src="images/MergeAll.png" alt="The Merge reintegrate Dialog"></div></div></div><p><br class="figure-break"> This dialog is very easy. All you have to do is set the options for the merge, as described in <a class="xref" href="tsvn-dug-merge.html#tsvn-dug-merge-options" title="Merge Options">&#8220;Merge Options&#8221;</a>. The rest is done by TortoiseSVN automatically using merge tracking.</p></div><div class="sect2" lang="id"><div class="titlepage"><div><div><h3 class="title"><a name="tsvn-dug-merge-maintenance"></a>Feature Branch Maintenance</h3></div></div></div><p>When you develop a new feature on a separate branch it is a good idea to work out a policy for re-integration when the feature is complete. If other work is going on in <code class="literal">trunk</code> at the same time you may find that the differences become significant over time, and merging back becomes a nightmare.</p><p>If the feature is relatively simple and development will not take long then you can adopt a simple approach, which is to keep the branch entirely separate until the feature is complete, then merge the branch changes back into trunk. In the merge wizard this would be a simple <span class="guilabel">Merge a range of revisions</span>, with the revision range being the revision span of the branch.</p><p>If the feature is going to take longer and you need to account for changes in <code class="literal">trunk</code>, then you need to keep the branch synchronised. This simply means that periodically you merge trunk changes into the branch, so that the branch contains all the trunk changes <span class="emphasis"><em>plus</em></span> the new feature. The synchronisation process uses <span class="guilabel">Merge a range of revisions</span>. When the feature is complete then you can merge it back to <code class="literal">trunk</code> using either <span class="guilabel">Reintegrate a branch</span> or <span class="guilabel">Merge two different trees</span>.</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="tsvn-dug-branchtag.html">Kembali</a>�</td><td width="20%" align="center"><a accesskey="u" href="tsvn-dug.html">Induk</a></td><td width="40%" align="right">�<a accesskey="n" href="tsvn-dug-locking.html">Lanjut</a></td></tr><tr><td width="40%" align="left" valign="top">Pencabangan / Pembuatan Tag�</td><td width="20%" align="center"><a accesskey="h" href="index.html">Depan</a></td><td width="40%" align="right" valign="top">�Penguncian</td></tr></table></div></body></html>
